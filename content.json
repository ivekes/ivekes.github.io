[{"title":"rocketmq学习","date":"2019-06-01T06:14:02.000Z","path":"2019/06/01/rocketmq学习/","text":"环境 centos7 内存2g jdk1.8 rocketmq4.4.0 说明：参考资料 rocketmq官网 吾同树 下载 &amp; 安装 下载 源码下载 zip包下载 rocketmq-externals下载 解压 1234&gt; unzip rocketmq-all-4.4.0-source-release.zip&gt; cd rocketmq-all-4.4.0/&gt; mvn -Prelease-all -DskipTests clean install -U&gt; cd distribution/target/apache-rocketmq 启动 nameserver 123&gt; nohup sh bin/mqnamesrv &amp;&gt; tail -f ~/logs/rocketmqlogs/namesrv.logThe Name Server boot success... 启动 broker 123&gt; nohup sh bin/mqbroker -n localhost:9876 &amp;&gt; tail -f ~/logs/rocketmqlogs/broker.log The broker[%s, 172.30.30.233:10911] boot success... 发送 &amp; 接收消息 123456&gt; export NAMESRV_ADDR=localhost:9876&gt; sh bin/tools.sh org.apache.rocketmq.example.quickstart.ProducerSendResult [sendStatus=SEND_OK, msgId= ...&gt; sh bin/tools.sh org.apache.rocketmq.example.quickstart.ConsumerConsumeMessageThread_%d Receive New Messages: [MessageExt... 安装 rocketmq-console rocketmq-externals 中有很多项目，我们这里只需要 rocketmq-console， 它是依赖于springboot-1.4.3.RELEASE 的 springboot 项目，导入 idea,修改配置文件 application.properties，把服务器地址修改成自己的，然后直接运行app.java 就可以了,详细配置参考吾同树 1rocketmq.config.namesrvAddr=mynode7:9876 也可将项目打成 jar 包，并运行 jar 文件 1234$ mvn clean package -Dmaven.test.skip=true$ java -jar target/rocketmq-console-ng-1.0.1.jar#如果配置文件没有填写Name Server$ java -jar target/rocketmq-console-ng-1.0.1.jar --rocketmq.config.namesrvAddr='mynode7:9876' 启动成功后，输入 http://localhost:8080/ ,即可进入管理后台操作 停止服务 1234567&gt; sh bin/mqshutdown brokerThe mqbroker(36695) is running...Send shutdown request to mqbroker(36695) OK&gt; sh bin/mqshutdown namesrvThe mqnamesrv(36664) is running...Send shutdown request to mqnamesrv(36664) OK 异常 &amp; 解决方案启动的过程中有可能遇到 broker 启动不起来的情况，修改$ROCKETMQ_HOME/bin/runbroker.sh 123&gt; vim bin/runbroker.shJAVA_OPT=\"$&#123;JAVA_OPT&#125; -server -Xms512m -Xmx512m -Xmn512m\"JAVA_OPT=\"$&#123;JAVA_OPT&#125; -XX:MaxDirectMemorySize=1g\" 命令行管理工具1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&gt; sh bin/mqadminThe most commonly used mqadmin commands are: updateTopic Update or create topic deleteTopic Delete topic from broker and NameServer. updateSubGroup Update or create subscription group deleteSubGroup Delete subscription group from broker. updateBrokerConfig Update broker's config updateTopicPerm Update topic perm topicRoute Examine topic route info topicStatus Examine topic Status info topicClusterList get cluster info for topic brokerStatus Fetch broker runtime status data queryMsgById Query Message by Id queryMsgByKey Query Message by Key queryMsgByUniqueKey Query Message by Unique key queryMsgByOffset Query Message by offset printMsg Print Message Detail printMsgByQueue Print Message Detail sendMsgStatus send msg to broker. brokerConsumeStats Fetch broker consume stats data producerConnection Query producer's socket connection and client version consumerConnection Query consumer's socket connection, client version and subscription consumerProgress Query consumers's progress, speed consumerStatus Query consumer's internal data structure cloneGroupOffset clone offset from other group. clusterList List all of clusters topicList Fetch all topic list from name server updateKvConfig Create or update KV config. deleteKvConfig Delete KV config. wipeWritePerm Wipe write perm of broker in all name server resetOffsetByTime Reset consumer offset by timestamp(without client restart). updateOrderConf Create or update or delete order conf cleanExpiredCQ Clean expired ConsumeQueue on broker. cleanUnusedTopic Clean unused topic on broker. startMonitoring Start Monitoring statsAll Topic and Consumer tps stats allocateMQ Allocate MQ checkMsgSendRT check message send response time clusterRT List All clusters Message Send RT getNamesrvConfig Get configs of name server. updateNamesrvConfig Update configs of name server. getBrokerConfig Get broker config by cluster or special broker! queryCq Query cq command. sendMessage Send a message consumeMessage Consume messageSee 'mqadmin help &lt;command&gt;' for more information on a specific command","tags":[{"name":"rocketmq","slug":"rocketmq","permalink":"https://ivekes.github.io/tags/rocketmq/"}]},{"title":"centos7新机及克隆","date":"2019-05-25T05:25:06.000Z","path":"2019/05/25/centos7新机及克隆/","text":"","tags":[]},{"title":"zookeper点滴","date":"2019-05-25T05:23:10.000Z","path":"2019/05/25/zookeper点滴/","text":"","tags":[]},{"title":"springcloud点滴","date":"2019-05-25T05:19:47.000Z","path":"2019/05/25/springcloud点滴/","text":"","tags":[]},{"title":"Hello World","date":"2019-05-25T04:44:06.048Z","path":"2019/05/25/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]}]